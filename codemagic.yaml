workflows:
  default-workflow:
    name: Appariteur
    instance_type: mac_mini_m1
    max_build_duration:   60
    environment:
      xcode: latest
      cocoapods: default
    scripts:
      - flutter pub get
      - flutter build ios --release --no-codesign
      - xcodebuild -exportArchive -archivePath ios/build/Runner.xcarchive -exportPath ios/build/Runner.ipa -exportOptionsPlist ios/ExportOptions.plist
    artifacts:
      - build/ios/iphoneos/Runner.app
      - build/ios/iphoneos/Runner.ipa
    triggering:
      events:
        - push
        - pull_request
        - tag
